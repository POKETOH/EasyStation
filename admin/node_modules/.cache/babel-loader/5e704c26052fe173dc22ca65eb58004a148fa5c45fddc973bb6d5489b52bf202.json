{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_4 = {\n  key: 0\n};\nconst _hoisted_5 = {\n  key: 1\n};\nconst _hoisted_6 = {\n  key: 0\n};\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_8 = {\n  key: 1\n};\nconst _hoisted_9 = {\n  key: 0\n};\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_11 = {\n  key: 1\n};\nconst _hoisted_12 = {\n  key: 0\n};\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_14 = {\n  key: 1\n};\nconst _hoisted_15 = {\n  key: 0\n};\nconst _hoisted_16 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_17 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_train_select_view = _resolveComponent(\"train-select-view\");\n  const _component_a_date_picker = _resolveComponent(\"a-date-picker\");\n  const _component_station_select_view = _resolveComponent(\"station-select-view\");\n  const _component_a_button = _resolveComponent(\"a-button\");\n  const _component_a_space = _resolveComponent(\"a-space\");\n  const _component_a_table = _resolveComponent(\"a-table\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"p\", null, [_createVNode(_component_a_space, null, {\n    default: _withCtx(() => [_createVNode(_component_train_select_view, {\n      modelValue: _ctx.params.trainCode,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.params.trainCode = $event),\n      width: \"200px\"\n    }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_a_date_picker, {\n      value: _ctx.params.date,\n      \"onUpdate:value\": _cache[1] || (_cache[1] = $event => _ctx.params.date = $event),\n      valueFormat: \"YYYY-MM-DD\",\n      placeholder: \"请选择日期\"\n    }, null, 8 /* PROPS */, [\"value\"]), _createVNode(_component_station_select_view, {\n      modelValue: _ctx.params.start,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.params.start = $event),\n      width: \"200px\"\n    }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_station_select_view, {\n      modelValue: _ctx.params.end,\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => _ctx.params.end = $event),\n      width: \"200px\"\n    }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_a_button, {\n      type: \"primary\",\n      onClick: _cache[4] || (_cache[4] = $event => _ctx.handleQuery())\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"查找\")]),\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  })]), _createVNode(_component_a_table, {\n    dataSource: _ctx.dailyTrainTickets,\n    columns: _ctx.columns,\n    pagination: _ctx.pagination,\n    onChange: _ctx.handleTableChange,\n    loading: _ctx.loading\n  }, {\n    bodyCell: _withCtx(({\n      column,\n      record\n    }) => [column.dataIndex === 'operation' ? (_openBlock(), _createElementBlock(_Fragment, {\n      key: 0\n    }, [], 64 /* STABLE_FRAGMENT */)) : column.dataIndex === 'station' ? (_openBlock(), _createElementBlock(_Fragment, {\n      key: 1\n    }, [_createTextVNode(_toDisplayString(record.start), 1 /* TEXT */), _hoisted_1, _createTextVNode(\" \" + _toDisplayString(record.end), 1 /* TEXT */)], 64 /* STABLE_FRAGMENT */)) : column.dataIndex === 'time' ? (_openBlock(), _createElementBlock(_Fragment, {\n      key: 2\n    }, [_createTextVNode(_toDisplayString(record.startTime), 1 /* TEXT */), _hoisted_2, _createTextVNode(\" \" + _toDisplayString(record.endTime), 1 /* TEXT */)], 64 /* STABLE_FRAGMENT */)) : column.dataIndex === 'duration' ? (_openBlock(), _createElementBlock(_Fragment, {\n      key: 3\n    }, [_createTextVNode(_toDisplayString(_ctx.calDuration(record.startTime, record.endTime)), 1 /* TEXT */), _hoisted_3, record.startTime.replaceAll(':', '') >= record.endTime.replaceAll(':', '') ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \" 次日到达 \")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, \" 当日到达 \"))], 64 /* STABLE_FRAGMENT */)) : column.dataIndex === 'ydz' ? (_openBlock(), _createElementBlock(_Fragment, {\n      key: 4\n    }, [record.ydz >= 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createTextVNode(_toDisplayString(record.ydz), 1 /* TEXT */), _hoisted_7, _createTextVNode(\" \" + _toDisplayString(record.ydzPrice) + \"￥ \", 1 /* TEXT */)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_8, \" -- \"))], 64 /* STABLE_FRAGMENT */)) : column.dataIndex === 'edz' ? (_openBlock(), _createElementBlock(_Fragment, {\n      key: 5\n    }, [record.edz >= 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createTextVNode(_toDisplayString(record.edz), 1 /* TEXT */), _hoisted_10, _createTextVNode(\" \" + _toDisplayString(record.edzPrice) + \"￥ \", 1 /* TEXT */)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_11, \" -- \"))], 64 /* STABLE_FRAGMENT */)) : column.dataIndex === 'rw' ? (_openBlock(), _createElementBlock(_Fragment, {\n      key: 6\n    }, [record.rw >= 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createTextVNode(_toDisplayString(record.rw), 1 /* TEXT */), _hoisted_13, _createTextVNode(\" \" + _toDisplayString(record.rwPrice) + \"￥ \", 1 /* TEXT */)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_14, \" -- \"))], 64 /* STABLE_FRAGMENT */)) : column.dataIndex === 'yw' ? (_openBlock(), _createElementBlock(_Fragment, {\n      key: 7\n    }, [record.yw >= 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [_createTextVNode(_toDisplayString(record.yw), 1 /* TEXT */), _hoisted_16, _createTextVNode(\" \" + _toDisplayString(record.ywPrice) + \"￥ \", 1 /* TEXT */)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_17, \" -- \"))], 64 /* STABLE_FRAGMENT */)) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"dataSource\", \"columns\", \"pagination\", \"onChange\", \"loading\"])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":"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","names":["_createElementVNode","_createVNode","_component_a_space","_component_train_select_view","_ctx","trainCode","width","_component_a_date_picker","value","date","valueFormat","placeholder","_component_station_select_view","start","end","_component_a_button","type","onClick","_component_a_table","dataSource","columns","pagination","onChange","loading","bodyCell","column","record","dataIndex","_createElementBlock","_Fragment","key","_hoisted_1","startTime","_hoisted_2","endTime","_hoisted_3","replaceAll","ydz","_hoisted_7","ydzPrice","edz","_hoisted_10","edzPrice","rw","_hoisted_13","rwPrice","yw","_hoisted_16","ywPrice"],"sourceRoot":"","sources":["E:\\Desktop\\projectCode\\12306\\train\\admin\\src\\views\\main\\business\\daily-train-ticket.vue"],"sourcesContent":["<template>\n  <p>\n    <a-space>\n      <train-select-view v-model=\"params.trainCode\" width=\"200px\"></train-select-view>\n      <a-date-picker v-model:value=\"params.date\" valueFormat=\"YYYY-MM-DD\" placeholder=\"请选择日期\"></a-date-picker>\n      <station-select-view v-model=\"params.start\" width=\"200px\"></station-select-view>\n      <station-select-view v-model=\"params.end\" width=\"200px\"></station-select-view>\n      <a-button type=\"primary\" @click=\"handleQuery()\">查找</a-button>\n    </a-space>\n  </p>\n  <a-table :dataSource=\"dailyTrainTickets\"\n           :columns=\"columns\"\n           :pagination=\"pagination\"\n           @change=\"handleTableChange\"\n           :loading=\"loading\">\n    <template #bodyCell=\"{ column, record }\">\n      <template v-if=\"column.dataIndex === 'operation'\">\n      </template>\n      <template v-else-if=\"column.dataIndex === 'station'\">\n        {{record.start}}<br/>\n        {{record.end}}\n      </template>\n      <template v-else-if=\"column.dataIndex === 'time'\">\n        {{record.startTime}}<br/>\n        {{record.endTime}}\n      </template>\n      <template v-else-if=\"column.dataIndex === 'duration'\">\n        {{calDuration(record.startTime, record.endTime)}}<br/>\n        <div v-if=\"record.startTime.replaceAll(':', '') >= record.endTime.replaceAll(':', '')\">\n          次日到达\n        </div>\n        <div v-else>\n          当日到达\n        </div>\n      </template>\n      <template v-else-if=\"column.dataIndex === 'ydz'\">\n        <div v-if=\"record.ydz >= 0\">\n          {{record.ydz}}<br/>\n          {{record.ydzPrice}}￥\n        </div>\n        <div v-else>\n          --\n        </div>\n      </template>\n      <template v-else-if=\"column.dataIndex === 'edz'\">\n        <div v-if=\"record.edz >= 0\">\n          {{record.edz}}<br/>\n          {{record.edzPrice}}￥\n        </div>\n        <div v-else>\n          --\n        </div>\n      </template>\n      <template v-else-if=\"column.dataIndex === 'rw'\">\n        <div v-if=\"record.rw >= 0\">\n          {{record.rw}}<br/>\n          {{record.rwPrice}}￥\n        </div>\n        <div v-else>\n          --\n        </div>\n      </template>\n      <template v-else-if=\"column.dataIndex === 'yw'\">\n        <div v-if=\"record.yw >= 0\">\n          {{record.yw}}<br/>\n          {{record.ywPrice}}￥\n        </div>\n        <div v-else>\n          --\n        </div>\n      </template>\n    </template>\n  </a-table>\n</template>\n\n<script>\nimport { defineComponent, ref, onMounted } from 'vue';\nimport {notification} from \"ant-design-vue\";\nimport axios from \"axios\";\nimport TrainSelectView from \"@/components/train-select\";\nimport StationSelectView from \"@/components/station-select\";\nimport dayjs from \"dayjs\";\n\nexport default defineComponent({\n  name: \"daily-train-ticket-view\",\n  components: {StationSelectView, TrainSelectView},\n  setup() {\n    const visible = ref(false);\n    let dailyTrainTicket = ref({\n      id: undefined,\n      date: undefined,\n      trainCode: undefined,\n      start: undefined,\n      startPinyin: undefined,\n      startTime: undefined,\n      startIndex: undefined,\n      end: undefined,\n      endPinyin: undefined,\n      endTime: undefined,\n      endIndex: undefined,\n      ydz: undefined,\n      ydzPrice: undefined,\n      edz: undefined,\n      edzPrice: undefined,\n      rw: undefined,\n      rwPrice: undefined,\n      yw: undefined,\n      ywPrice: undefined,\n      createTime: undefined,\n      updateTime: undefined,\n    });\n    const dailyTrainTickets = ref([]);\n    // 分页的三个属性名是固定的\n    const pagination = ref({\n      total: 0,\n      current: 1,\n      pageSize: 10,\n    });\n    let loading = ref(false);\n    const params = ref({});\n    const columns = [\n    {\n      title: '日期',\n      dataIndex: 'date',\n      key: 'date',\n    },\n    {\n      title: '车次编号',\n      dataIndex: 'trainCode',\n      key: 'trainCode',\n    },\n    {\n      title: '车站',\n      dataIndex: 'station',\n    },\n    {\n      title: '时间',\n      dataIndex: 'time',\n    },\n    {\n      title: '历时',\n      dataIndex: 'duration',\n    },\n    // {\n    //   title: '出发站',\n    //   dataIndex: 'start',\n    //   key: 'start',\n    // },\n    // {\n    //   title: '出发站拼音',\n    //   dataIndex: 'startPinyin',\n    //   key: 'startPinyin',\n    // },\n    // {\n    //   title: '出发时间',\n    //   dataIndex: 'startTime',\n    //   key: 'startTime',\n    // },\n    // {\n    //   title: '出发站序',\n    //   dataIndex: 'startIndex',\n    //   key: 'startIndex',\n    // },\n    // {\n    //   title: '到达站',\n    //   dataIndex: 'end',\n    //   key: 'end',\n    // },\n    // {\n    //   title: '到达站拼音',\n    //   dataIndex: 'endPinyin',\n    //   key: 'endPinyin',\n    // },\n    // {\n    //   title: '到站时间',\n    //   dataIndex: 'endTime',\n    //   key: 'endTime',\n    // },\n    // {\n    //   title: '到站站序',\n    //   dataIndex: 'endIndex',\n    //   key: 'endIndex',\n    // },\n    {\n      title: '一等座',\n      dataIndex: 'ydz',\n      key: 'ydz',\n    },\n    // {\n    //   title: '一等座票价',\n    //   dataIndex: 'ydzPrice',\n    //   key: 'ydzPrice',\n    // },\n    {\n      title: '二等座',\n      dataIndex: 'edz',\n      key: 'edz',\n    },\n    // {\n    //   title: '二等座票价',\n    //   dataIndex: 'edzPrice',\n    //   key: 'edzPrice',\n    // },\n    {\n      title: '软卧',\n      dataIndex: 'rw',\n      key: 'rw',\n    },\n    // {\n    //   title: '软卧票价',\n    //   dataIndex: 'rwPrice',\n    //   key: 'rwPrice',\n    // },\n    {\n      title: '硬卧',\n      dataIndex: 'yw',\n      key: 'yw',\n    },\n    // {\n    //   title: '硬卧票价',\n    //   dataIndex: 'ywPrice',\n    //   key: 'ywPrice',\n    // },\n    ];\n\n\n    const handleQuery = (param) => {\n      if (!param) {\n        param = {\n          page: 1,\n          size: pagination.value.pageSize\n        };\n      }\n      loading.value = true;\n      axios.get(\"/business/admin/daily-train-ticket/query-list\", {\n        params: {\n          page: param.page,\n          size: param.size,\n          trainCode: params.value.trainCode,\n          date: params.value.date,\n          start: params.value.start,\n          end: params.value.end\n        }\n      }).then((response) => {\n        loading.value = false;\n        let data = response.data;\n        if (data.success) {\n          dailyTrainTickets.value = data.content.list;\n          // 设置分页控件的值\n          pagination.value.current = param.page;\n          pagination.value.total = data.content.total;\n        } else {\n          notification.error({description: data.message});\n        }\n      });\n    };\n\n    const handleTableChange = (page) => {\n      // console.log(\"看看自带的分页参数都有啥：\" + JSON.stringify(page));\n      pagination.value.pageSize = page.pageSize;\n      handleQuery({\n        page: page.current,\n        size: page.pageSize\n      });\n    };\n\n    const calDuration = (startTime, endTime) => {\n      let diff = dayjs(endTime, 'HH:mm:ss').diff(dayjs(startTime, 'HH:mm:ss'), 'seconds');\n      return dayjs('00:00:00', 'HH:mm:ss').second(diff).format('HH:mm:ss');\n    };\n\n    onMounted(() => {\n      handleQuery({\n        page: 1,\n        size: pagination.value.pageSize\n      });\n    });\n\n    return {\n      dailyTrainTicket,\n      visible,\n      dailyTrainTickets,\n      pagination,\n      columns,\n      handleTableChange,\n      handleQuery,\n      loading,\n      params,\n      calDuration\n    };\n  },\n});\n</script>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}