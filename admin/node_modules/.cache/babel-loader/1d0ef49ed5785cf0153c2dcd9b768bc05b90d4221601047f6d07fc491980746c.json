{"ast":null,"code":"import { defineComponent, ref, onMounted } from 'vue';\nimport { notification } from \"ant-design-vue\";\nimport axios from \"axios\";\nexport default defineComponent({\n  name: \"ticket-view\",\n  setup() {\n    const SEAT_COL_ARRAY = window.SEAT_COL_ARRAY;\n    const SEAT_TYPE_ARRAY = window.SEAT_TYPE_ARRAY;\n    const visible = ref(false);\n    let ticket = ref({\n      id: undefined,\n      memberId: undefined,\n      passengerId: undefined,\n      passengerName: undefined,\n      trainDate: undefined,\n      trainCode: undefined,\n      carriageIndex: undefined,\n      seatRow: undefined,\n      seatCol: undefined,\n      startStation: undefined,\n      startTime: undefined,\n      endStation: undefined,\n      endTime: undefined,\n      seatType: undefined,\n      createTime: undefined,\n      updateTime: undefined\n    });\n    const tickets = ref([]);\n    // 分页的三个属性名是固定的\n    const pagination = ref({\n      total: 0,\n      current: 1,\n      pageSize: 10\n    });\n    let loading = ref(false);\n    const columns = [{\n      title: '乘客姓名',\n      dataIndex: 'passengerName',\n      key: 'passengerName'\n    }, {\n      title: '日期',\n      dataIndex: 'trainDate',\n      key: 'trainDate'\n    }, {\n      title: '车次编号',\n      dataIndex: 'trainCode',\n      key: 'trainCode'\n    }, {\n      title: '箱序',\n      dataIndex: 'carriageIndex',\n      key: 'carriageIndex'\n    }, {\n      title: '排号',\n      dataIndex: 'seatRow',\n      key: 'seatRow'\n    }, {\n      title: '列号',\n      dataIndex: 'seatCol',\n      key: 'seatCol'\n    }, {\n      title: '出发站',\n      dataIndex: 'startStation',\n      key: 'startStation'\n    }, {\n      title: '出发时间',\n      dataIndex: 'startTime',\n      key: 'startTime'\n    }, {\n      title: '到达站',\n      dataIndex: 'endStation',\n      key: 'endStation'\n    }, {\n      title: '到站时间',\n      dataIndex: 'endTime',\n      key: 'endTime'\n    }, {\n      title: '座位类型',\n      dataIndex: 'seatType',\n      key: 'seatType'\n    }];\n    const handleQuery = param => {\n      if (!param) {\n        param = {\n          page: 1,\n          size: pagination.value.pageSize\n        };\n      }\n      loading.value = true;\n      axios.get(\"/member/admin/ticket/query-list\", {\n        params: {\n          page: param.page,\n          size: param.size\n        }\n      }).then(response => {\n        loading.value = false;\n        let data = response.data;\n        if (data.success) {\n          tickets.value = data.content.list;\n          // 设置分页控件的值\n          pagination.value.current = param.page;\n          pagination.value.total = data.content.total;\n        } else {\n          notification.error({\n            description: data.message\n          });\n        }\n      });\n    };\n    const handleTableChange = page => {\n      // console.log(\"看看自带的分页参数都有啥：\" + JSON.stringify(page));\n      pagination.value.pageSize = page.pageSize;\n      handleQuery({\n        page: page.current,\n        size: page.pageSize\n      });\n    };\n    onMounted(() => {\n      handleQuery({\n        page: 1,\n        size: pagination.value.pageSize\n      });\n    });\n    return {\n      SEAT_COL_ARRAY,\n      SEAT_TYPE_ARRAY,\n      ticket,\n      visible,\n      tickets,\n      pagination,\n      columns,\n      handleTableChange,\n      handleQuery,\n      loading\n    };\n  }\n});","map":{"version":3,"mappings":"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","names":["defineComponent","ref","onMounted","notification","axios","name","setup","SEAT_COL_ARRAY","window","SEAT_TYPE_ARRAY","visible","ticket","id","undefined","memberId","passengerId","passengerName","trainDate","trainCode","carriageIndex","seatRow","seatCol","startStation","startTime","endStation","endTime","seatType","createTime","updateTime","tickets","pagination","total","current","pageSize","loading","columns","title","dataIndex","key","handleQuery","param","page","size","value","get","params","then","response","data","success","content","list","error","description","message","handleTableChange"],"sourceRoot":"","sources":["E:\\Desktop\\projectCode\\12306\\train\\admin\\src\\views\\main\\member\\ticket.vue"],"sourcesContent":["<template>\n  <p>\n    <a-space>\n      <a-button type=\"primary\" @click=\"handleQuery()\">刷新</a-button>\n\n    </a-space>\n  </p>\n  <a-table :dataSource=\"tickets\"\n           :columns=\"columns\"\n           :pagination=\"pagination\"\n           @change=\"handleTableChange\"\n           :loading=\"loading\">\n    <template #bodyCell=\"{ column, record }\">\n      <template v-if=\"column.dataIndex === 'operation'\">\n      </template>\n      <template v-else-if=\"column.dataIndex === 'seatCol'\">\n        <span v-for=\"item in SEAT_COL_ARRAY\" :key=\"item.code\">\n          <span v-if=\"item.code === record.seatCol && item.type === record.seatType\">\n            {{item.desc}}\n          </span>\n        </span>\n      </template>\n      <template v-else-if=\"column.dataIndex === 'seatType'\">\n        <span v-for=\"item in SEAT_TYPE_ARRAY\" :key=\"item.code\">\n          <span v-if=\"item.code === record.seatType\">\n            {{item.desc}}\n          </span>\n        </span>\n      </template>\n    </template>\n  </a-table>\n</template>\n\n<script>\nimport { defineComponent, ref, onMounted } from 'vue';\nimport {notification} from \"ant-design-vue\";\nimport axios from \"axios\";\n\nexport default defineComponent({\n  name: \"ticket-view\",\n  setup() {\n    const SEAT_COL_ARRAY = window.SEAT_COL_ARRAY;\n    const SEAT_TYPE_ARRAY = window.SEAT_TYPE_ARRAY;\n    const visible = ref(false);\n    let ticket = ref({\n      id: undefined,\n      memberId: undefined,\n      passengerId: undefined,\n      passengerName: undefined,\n      trainDate: undefined,\n      trainCode: undefined,\n      carriageIndex: undefined,\n      seatRow: undefined,\n      seatCol: undefined,\n      startStation: undefined,\n      startTime: undefined,\n      endStation: undefined,\n      endTime: undefined,\n      seatType: undefined,\n      createTime: undefined,\n      updateTime: undefined,\n    });\n    const tickets = ref([]);\n    // 分页的三个属性名是固定的\n    const pagination = ref({\n      total: 0,\n      current: 1,\n      pageSize: 10,\n    });\n    let loading = ref(false);\n    const columns = [\n    {\n      title: '乘客姓名',\n      dataIndex: 'passengerName',\n      key: 'passengerName',\n    },\n    {\n      title: '日期',\n      dataIndex: 'trainDate',\n      key: 'trainDate',\n    },\n    {\n      title: '车次编号',\n      dataIndex: 'trainCode',\n      key: 'trainCode',\n    },\n    {\n      title: '箱序',\n      dataIndex: 'carriageIndex',\n      key: 'carriageIndex',\n    },\n    {\n      title: '排号',\n      dataIndex: 'seatRow',\n      key: 'seatRow',\n    },\n    {\n      title: '列号',\n      dataIndex: 'seatCol',\n      key: 'seatCol',\n    },\n    {\n      title: '出发站',\n      dataIndex: 'startStation',\n      key: 'startStation',\n    },\n    {\n      title: '出发时间',\n      dataIndex: 'startTime',\n      key: 'startTime',\n    },\n    {\n      title: '到达站',\n      dataIndex: 'endStation',\n      key: 'endStation',\n    },\n    {\n      title: '到站时间',\n      dataIndex: 'endTime',\n      key: 'endTime',\n    },\n    {\n      title: '座位类型',\n      dataIndex: 'seatType',\n      key: 'seatType',\n    },\n    ];\n\n\n    const handleQuery = (param) => {\n      if (!param) {\n        param = {\n          page: 1,\n          size: pagination.value.pageSize\n        };\n      }\n      loading.value = true;\n      axios.get(\"/member/admin/ticket/query-list\", {\n        params: {\n          page: param.page,\n          size: param.size\n        }\n      }).then((response) => {\n        loading.value = false;\n        let data = response.data;\n        if (data.success) {\n          tickets.value = data.content.list;\n          // 设置分页控件的值\n          pagination.value.current = param.page;\n          pagination.value.total = data.content.total;\n        } else {\n          notification.error({description: data.message});\n        }\n      });\n    };\n\n    const handleTableChange = (page) => {\n      // console.log(\"看看自带的分页参数都有啥：\" + JSON.stringify(page));\n      pagination.value.pageSize = page.pageSize;\n      handleQuery({\n        page: page.current,\n        size: page.pageSize\n      });\n    };\n\n    onMounted(() => {\n      handleQuery({\n        page: 1,\n        size: pagination.value.pageSize\n      });\n    });\n\n    return {\n      SEAT_COL_ARRAY,\n      SEAT_TYPE_ARRAY,\n      ticket,\n      visible,\n      tickets,\n      pagination,\n      columns,\n      handleTableChange,\n      handleQuery,\n      loading,\n    };\n  },\n});\n</script>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}