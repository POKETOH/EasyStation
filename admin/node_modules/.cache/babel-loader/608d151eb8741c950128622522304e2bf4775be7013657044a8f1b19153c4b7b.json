{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"a\", {\n  style: {\n    \"color\": \"red\"\n  }\n}, \"删除\", -1 /* HOISTED */);\nconst _hoisted_2 = [\"onClick\"];\nconst _hoisted_3 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_date_picker = _resolveComponent(\"a-date-picker\");\n  const _component_train_select_view = _resolveComponent(\"train-select-view\");\n  const _component_a_button = _resolveComponent(\"a-button\");\n  const _component_a_space = _resolveComponent(\"a-space\");\n  const _component_a_popconfirm = _resolveComponent(\"a-popconfirm\");\n  const _component_a_table = _resolveComponent(\"a-table\");\n  const _component_a_form_item = _resolveComponent(\"a-form-item\");\n  const _component_a_select_option = _resolveComponent(\"a-select-option\");\n  const _component_a_select = _resolveComponent(\"a-select\");\n  const _component_a_input = _resolveComponent(\"a-input\");\n  const _component_a_time_picker = _resolveComponent(\"a-time-picker\");\n  const _component_a_form = _resolveComponent(\"a-form\");\n  const _component_a_modal = _resolveComponent(\"a-modal\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"p\", null, [_createVNode(_component_a_space, null, {\n    default: _withCtx(() => [_createVNode(_component_a_date_picker, {\n      value: _ctx.params.date,\n      \"onUpdate:value\": _cache[0] || (_cache[0] = $event => _ctx.params.date = $event),\n      valueFormat: \"YYYY-MM-DD\",\n      placeholder: \"请选择日期\"\n    }, null, 8 /* PROPS */, [\"value\"]), _createVNode(_component_train_select_view, {\n      modelValue: _ctx.params.code,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.params.code = $event),\n      width: \"200px\"\n    }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_a_button, {\n      type: \"primary\",\n      onClick: _cache[2] || (_cache[2] = $event => _ctx.handleQuery())\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"刷新\")]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_a_button, {\n      type: \"primary\",\n      onClick: _ctx.onAdd\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"新增\")]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_a_button, {\n      type: \"danger\",\n      onClick: _ctx.onClickGenDaily\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"手动生成车次信息\")]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])]),\n    _: 1 /* STABLE */\n  })]), _createVNode(_component_a_table, {\n    dataSource: _ctx.dailyTrains,\n    columns: _ctx.columns,\n    pagination: _ctx.pagination,\n    onChange: _ctx.handleTableChange,\n    loading: _ctx.loading\n  }, {\n    bodyCell: _withCtx(({\n      column,\n      record\n    }) => [column.dataIndex === 'operation' ? (_openBlock(), _createBlock(_component_a_space, {\n      key: 0\n    }, {\n      default: _withCtx(() => [_createVNode(_component_a_popconfirm, {\n        title: \"删除后不可恢复，确认删除?\",\n        onConfirm: $event => _ctx.onDelete(record),\n        \"ok-text\": \"确认\",\n        \"cancel-text\": \"取消\"\n      }, {\n        default: _withCtx(() => [_hoisted_1]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onConfirm\"]), _createElementVNode(\"a\", {\n        onClick: $event => _ctx.onEdit(record)\n      }, \"编辑\", 8 /* PROPS */, _hoisted_2)]),\n      _: 2 /* DYNAMIC */\n    }, 1024 /* DYNAMIC_SLOTS */)) : column.dataIndex === 'type' ? (_openBlock(true), _createElementBlock(_Fragment, {\n      key: 1\n    }, _renderList(_ctx.TRAIN_TYPE_ARRAY, item => {\n      return _openBlock(), _createElementBlock(\"span\", {\n        key: item.code\n      }, [item.code === record.type ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _toDisplayString(item.desc), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]);\n    }), 128 /* KEYED_FRAGMENT */)) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"dataSource\", \"columns\", \"pagination\", \"onChange\", \"loading\"]), _createVNode(_component_a_modal, {\n    visible: _ctx.visible,\n    \"onUpdate:visible\": _cache[12] || (_cache[12] = $event => _ctx.visible = $event),\n    title: \"每日车次\",\n    onOk: _ctx.handleOk,\n    \"ok-text\": \"确认\",\n    \"cancel-text\": \"取消\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_a_form, {\n      model: _ctx.dailyTrain,\n      \"label-col\": {\n        span: 4\n      },\n      \"wrapper-col\": {\n        span: 20\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_a_form_item, {\n        label: \"日期\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_date_picker, {\n          value: _ctx.dailyTrain.date,\n          \"onUpdate:value\": _cache[3] || (_cache[3] = $event => _ctx.dailyTrain.date = $event),\n          valueFormat: \"YYYY-MM-DD\",\n          placeholder: \"请选择日期\"\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        label: \"车次编号\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_train_select_view, {\n          modelValue: _ctx.dailyTrain.code,\n          \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => _ctx.dailyTrain.code = $event),\n          onChange: _ctx.onChangeCode\n        }, null, 8 /* PROPS */, [\"modelValue\", \"onChange\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        label: \"车次类型\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_select, {\n          value: _ctx.dailyTrain.type,\n          \"onUpdate:value\": _cache[5] || (_cache[5] = $event => _ctx.dailyTrain.type = $event)\n        }, {\n          default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.TRAIN_TYPE_ARRAY, item => {\n            return _openBlock(), _createBlock(_component_a_select_option, {\n              key: item.code,\n              value: item.code\n            }, {\n              default: _withCtx(() => [_createTextVNode(_toDisplayString(item.desc), 1 /* TEXT */)]),\n\n              _: 2 /* DYNAMIC */\n            }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"value\"]);\n          }), 128 /* KEYED_FRAGMENT */))]),\n\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        label: \"始发站\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input, {\n          value: _ctx.dailyTrain.start,\n          \"onUpdate:value\": _cache[6] || (_cache[6] = $event => _ctx.dailyTrain.start = $event)\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        label: \"始发站拼音\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input, {\n          value: _ctx.dailyTrain.startPinyin,\n          \"onUpdate:value\": _cache[7] || (_cache[7] = $event => _ctx.dailyTrain.startPinyin = $event)\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        label: \"出发时间\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_time_picker, {\n          value: _ctx.dailyTrain.startTime,\n          \"onUpdate:value\": _cache[8] || (_cache[8] = $event => _ctx.dailyTrain.startTime = $event),\n          valueFormat: \"HH:mm:ss\",\n          placeholder: \"请选择时间\"\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        label: \"终点站\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input, {\n          value: _ctx.dailyTrain.end,\n          \"onUpdate:value\": _cache[9] || (_cache[9] = $event => _ctx.dailyTrain.end = $event)\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        label: \"终点站拼音\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input, {\n          value: _ctx.dailyTrain.endPinyin,\n          \"onUpdate:value\": _cache[10] || (_cache[10] = $event => _ctx.dailyTrain.endPinyin = $event)\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        label: \"到站时间\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_time_picker, {\n          value: _ctx.dailyTrain.endTime,\n          \"onUpdate:value\": _cache[11] || (_cache[11] = $event => _ctx.dailyTrain.endTime = $event),\n          valueFormat: \"HH:mm:ss\",\n          placeholder: \"请选择时间\"\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"visible\", \"onOk\"]), _createVNode(_component_a_modal, {\n    visible: _ctx.genDailyVisible,\n    \"onUpdate:visible\": _cache[14] || (_cache[14] = $event => _ctx.genDailyVisible = $event),\n    title: \"生成车次\",\n    onOk: _ctx.handleGenDailyOk,\n    \"confirm-loading\": _ctx.genDailyLoading,\n    \"ok-text\": \"确认\",\n    \"cancel-text\": \"取消\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_a_form, {\n      model: _ctx.genDaily,\n      \"label-col\": {\n        span: 4\n      },\n      \"wrapper-col\": {\n        span: 20\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_a_form_item, {\n        label: \"日期\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_date_picker, {\n          value: _ctx.genDaily.date,\n          \"onUpdate:value\": _cache[13] || (_cache[13] = $event => _ctx.genDaily.date = $event),\n          placeholder: \"请选择日期\"\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"visible\", \"onOk\", \"confirm-loading\"])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":"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","names":["_createElementVNode","style","_createVNode","_component_a_space","_component_a_date_picker","value","_ctx","date","valueFormat","placeholder","_component_train_select_view","code","width","_component_a_button","type","onClick","_component_a_table","dataSource","columns","pagination","onChange","loading","bodyCell","column","record","dataIndex","_createBlock","key","_component_a_popconfirm","title","onConfirm","_hoisted_1","_createElementBlock","_Fragment","item","desc","_component_a_modal","visible","onOk","_component_a_form","model","span","_component_a_form_item","label","_component_a_select","_component_a_select_option","_component_a_input","start","startPinyin","_component_a_time_picker","startTime","end","endPinyin","endTime"],"sourceRoot":"","sources":["E:\\Desktop\\projectCode\\12306\\train\\admin\\src\\views\\main\\business\\daily-train.vue"],"sourcesContent":["<template>\n  <p>\n    <a-space>\n      <a-date-picker v-model:value=\"params.date\" valueFormat=\"YYYY-MM-DD\" placeholder=\"请选择日期\" />\n      <train-select-view v-model=\"params.code\" width=\"200px\"></train-select-view>\n      <a-button type=\"primary\" @click=\"handleQuery()\">刷新</a-button>\n      <a-button type=\"primary\" @click=\"onAdd\">新增</a-button>\n      <a-button type=\"danger\" @click=\"onClickGenDaily\">手动生成车次信息</a-button>\n    </a-space>\n  </p>\n  <a-table :dataSource=\"dailyTrains\"\n           :columns=\"columns\"\n           :pagination=\"pagination\"\n           @change=\"handleTableChange\"\n           :loading=\"loading\">\n    <template #bodyCell=\"{ column, record }\">\n      <template v-if=\"column.dataIndex === 'operation'\">\n        <a-space>\n          <a-popconfirm\n              title=\"删除后不可恢复，确认删除?\"\n              @confirm=\"onDelete(record)\"\n              ok-text=\"确认\" cancel-text=\"取消\">\n            <a style=\"color: red\">删除</a>\n          </a-popconfirm>\n          <a @click=\"onEdit(record)\">编辑</a>\n        </a-space>\n      </template>\n      <template v-else-if=\"column.dataIndex === 'type'\">\n        <span v-for=\"item in TRAIN_TYPE_ARRAY\" :key=\"item.code\">\n          <span v-if=\"item.code === record.type\">\n            {{item.desc}}\n          </span>\n        </span>\n      </template>\n    </template>\n  </a-table>\n  <a-modal v-model:visible=\"visible\" title=\"每日车次\" @ok=\"handleOk\"\n           ok-text=\"确认\" cancel-text=\"取消\">\n    <a-form :model=\"dailyTrain\" :label-col=\"{span: 4}\" :wrapper-col=\"{ span: 20 }\">\n      <a-form-item label=\"日期\">\n        <a-date-picker v-model:value=\"dailyTrain.date\" valueFormat=\"YYYY-MM-DD\" placeholder=\"请选择日期\" />\n      </a-form-item>\n      <a-form-item label=\"车次编号\">\n        <train-select-view v-model=\"dailyTrain.code\" @change=\"onChangeCode\"></train-select-view>\n      </a-form-item>\n      <a-form-item label=\"车次类型\">\n        <a-select v-model:value=\"dailyTrain.type\">\n          <a-select-option v-for=\"item in TRAIN_TYPE_ARRAY\" :key=\"item.code\" :value=\"item.code\">\n            {{item.desc}}\n          </a-select-option>\n        </a-select>\n      </a-form-item>\n      <a-form-item label=\"始发站\">\n        <a-input v-model:value=\"dailyTrain.start\" />\n      </a-form-item>\n      <a-form-item label=\"始发站拼音\">\n        <a-input v-model:value=\"dailyTrain.startPinyin\" />\n      </a-form-item>\n      <a-form-item label=\"出发时间\">\n        <a-time-picker v-model:value=\"dailyTrain.startTime\" valueFormat=\"HH:mm:ss\" placeholder=\"请选择时间\" />\n      </a-form-item>\n      <a-form-item label=\"终点站\">\n        <a-input v-model:value=\"dailyTrain.end\" />\n      </a-form-item>\n      <a-form-item label=\"终点站拼音\">\n        <a-input v-model:value=\"dailyTrain.endPinyin\" />\n      </a-form-item>\n      <a-form-item label=\"到站时间\">\n        <a-time-picker v-model:value=\"dailyTrain.endTime\" valueFormat=\"HH:mm:ss\" placeholder=\"请选择时间\" />\n      </a-form-item>\n    </a-form>\n  </a-modal>\n  <a-modal v-model:visible=\"genDailyVisible\" title=\"生成车次\" @ok=\"handleGenDailyOk\"\n           :confirm-loading=\"genDailyLoading\" ok-text=\"确认\" cancel-text=\"取消\">\n    <a-form :model=\"genDaily\" :label-col=\"{span: 4}\" :wrapper-col=\"{ span: 20 }\">\n      <a-form-item label=\"日期\">\n        <a-date-picker v-model:value=\"genDaily.date\" placeholder=\"请选择日期\"/>\n      </a-form-item>\n    </a-form>\n  </a-modal>\n</template>\n\n<script>\nimport { defineComponent, ref, onMounted } from 'vue';\nimport {notification} from \"ant-design-vue\";\nimport axios from \"axios\";\nimport TrainSelectView from \"@/components/train-select\";\nimport dayjs from 'dayjs';\n\nexport default defineComponent({\n  name: \"daily-train-view\",\n  components: {TrainSelectView},\n  setup() {\n    const TRAIN_TYPE_ARRAY = window.TRAIN_TYPE_ARRAY;\n    const visible = ref(false);\n    let dailyTrain = ref({\n      id: undefined,\n      date: undefined,\n      code: undefined,\n      type: undefined,\n      start: undefined,\n      startPinyin: undefined,\n      startTime: undefined,\n      end: undefined,\n      endPinyin: undefined,\n      endTime: undefined,\n      createTime: undefined,\n      updateTime: undefined,\n    });\n    const dailyTrains = ref([]);\n    // 分页的三个属性名是固定的\n    const pagination = ref({\n      total: 0,\n      current: 1,\n      pageSize: 10,\n    });\n    let loading = ref(false);\n    let params = ref({\n      code: null\n    });\n    const genDaily = ref({\n      date: null\n    });\n    const genDailyVisible = ref(false);\n    const genDailyLoading = ref(false);\n    const columns = [\n    {\n      title: '日期',\n      dataIndex: 'date',\n      key: 'date',\n    },\n    {\n      title: '车次编号',\n      dataIndex: 'code',\n      key: 'code',\n    },\n    {\n      title: '车次类型',\n      dataIndex: 'type',\n      key: 'type',\n    },\n    {\n      title: '始发站',\n      dataIndex: 'start',\n      key: 'start',\n    },\n    {\n      title: '始发站拼音',\n      dataIndex: 'startPinyin',\n      key: 'startPinyin',\n    },\n    {\n      title: '出发时间',\n      dataIndex: 'startTime',\n      key: 'startTime',\n    },\n    {\n      title: '终点站',\n      dataIndex: 'end',\n      key: 'end',\n    },\n    {\n      title: '终点站拼音',\n      dataIndex: 'endPinyin',\n      key: 'endPinyin',\n    },\n    {\n      title: '到站时间',\n      dataIndex: 'endTime',\n      key: 'endTime',\n    },\n    {\n      title: '操作',\n      dataIndex: 'operation'\n    }\n    ];\n\n    const onAdd = () => {\n      dailyTrain.value = {};\n      visible.value = true;\n    };\n\n    const onEdit = (record) => {\n      dailyTrain.value = window.Tool.copy(record);\n      visible.value = true;\n    };\n\n    const onDelete = (record) => {\n      axios.delete(\"/business/admin/daily-train/delete/\" + record.id).then((response) => {\n        const data = response.data;\n        if (data.success) {\n          notification.success({description: \"删除成功！\"});\n          handleQuery({\n            page: pagination.value.current,\n            size: pagination.value.pageSize,\n          });\n        } else {\n          notification.error({description: data.message});\n        }\n      });\n    };\n\n    const handleOk = () => {\n      axios.post(\"/business/admin/daily-train/save\", dailyTrain.value).then((response) => {\n        let data = response.data;\n        if (data.success) {\n          notification.success({description: \"保存成功！\"});\n          visible.value = false;\n          handleQuery({\n            page: pagination.value.current,\n            size: pagination.value.pageSize\n          });\n        } else {\n          notification.error({description: data.message});\n        }\n      });\n    };\n\n    const handleQuery = (param) => {\n      if (!param) {\n        param = {\n          page: 1,\n          size: pagination.value.pageSize\n        };\n      }\n      loading.value = true;\n      axios.get(\"/business/admin/daily-train/query-list\", {\n        params: {\n          page: param.page,\n          size: param.size,\n          code: params.value.code,\n          date: params.value.date\n        }\n      }).then((response) => {\n        loading.value = false;\n        let data = response.data;\n        if (data.success) {\n          dailyTrains.value = data.content.list;\n          // 设置分页控件的值\n          pagination.value.current = param.page;\n          pagination.value.total = data.content.total;\n        } else {\n          notification.error({description: data.message});\n        }\n      });\n    };\n\n    const handleTableChange = (pagination) => {\n      // console.log(\"看看自带的分页参数都有啥：\" + pagination);\n      handleQuery({\n        page: pagination.current,\n        size: pagination.pageSize\n      });\n    };\n\n    const onChangeCode = (train) => {\n      console.log(\"车次下拉组件选择：\", train);\n      let t = Tool.copy(train);\n      delete t.id;\n      // 用assign可以合并\n      dailyTrain.value = Object.assign(dailyTrain.value, t);\n    };\n\n    const onClickGenDaily = () => {\n      genDailyVisible.value = true;\n    };\n\n    const handleGenDailyOk = () => {\n      let date = dayjs(genDaily.value.date).format(\"YYYY-MM-DD\");\n      genDailyLoading.value = true;\n      axios.get(\"/business/admin/daily-train/gen-daily/\" + date).then((response) => {\n        genDailyLoading.value = false;\n        let data = response.data;\n        if (data.success) {\n          notification.success({description: \"生成成功！\"});\n          genDailyVisible.value = false;\n          handleQuery({\n            page: pagination.value.current,\n            size: pagination.value.pageSize\n          });\n        } else {\n          notification.error({description: data.message});\n        }\n      });\n    };\n\n    onMounted(() => {\n      handleQuery({\n        page: 1,\n        size: pagination.value.pageSize\n      });\n    });\n\n    return {\n      TRAIN_TYPE_ARRAY,\n      dailyTrain,\n      visible,\n      dailyTrains,\n      pagination,\n      columns,\n      handleTableChange,\n      handleQuery,\n      loading,\n      onAdd,\n      handleOk,\n      onEdit,\n      onDelete,\n      onChangeCode,\n      params,\n      genDaily,\n      genDailyVisible,\n      handleGenDailyOk,\n      onClickGenDaily,\n      genDailyLoading\n    };\n  },\n});\n</script>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}