{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock, normalizeStyle as _normalizeStyle } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_select_option = _resolveComponent(\"a-select-option\");\n  const _component_a_select = _resolveComponent(\"a-select\");\n  return _openBlock(), _createBlock(_component_a_select, {\n    value: _ctx.name,\n    \"onUpdate:value\": _cache[0] || (_cache[0] = $event => _ctx.name = $event),\n    \"show-search\": \"\",\n    allowClear: \"\",\n    filterOption: _ctx.filterNameOption,\n    onChange: _ctx.onChange,\n    placeholder: \"请选择车站\",\n    style: _normalizeStyle('width: ' + _ctx.localWidth)\n  }, {\n    default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.stations, item => {\n      return _openBlock(), _createBlock(_component_a_select_option, {\n        key: item.name,\n        value: item.name,\n        label: item.name + item.namePinyin + item.namePy\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(item.name) + \" \" + _toDisplayString(item.namePinyin) + \" ~ \" + _toDisplayString(item.namePy), 1 /* TEXT */)]),\n\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"value\", \"label\"]);\n    }), 128 /* KEYED_FRAGMENT */))]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"value\", \"filterOption\", \"onChange\", \"style\"]);\n}","map":{"version":3,"mappings":";;;;uBACEA,aAOWC;IAPOC,KAAK,EAAEC,SAAI;0DAAJA,SAAI;IAAE,aAAW,EAAX,EAAW;IAACC,UAAU,EAAV,EAAU;IAC1CC,YAAY,EAAEF,qBAAgB;IAC9BG,QAAM,EAAEH,aAAQ;IAAEI,WAAW,EAAC,OAAO;IACrCC,KAAK,8BAAcL,eAAU;;sBACrB,MAAwB,oBAAzCM,oBAEkBC,6BAFcP,aAAQ,EAAhBQ,IAAI;2BAA5BX,aAEkBY;QAFyBC,GAAG,EAAEF,IAAI,CAACG,IAAI;QAAGZ,KAAK,EAAES,IAAI,CAACG,IAAI;QAAGC,KAAK,EAAEJ,IAAI,CAACG,IAAI,GAAGH,IAAI,CAACK,UAAU,GAAGL,IAAI,CAACM;;0BACvH,MAAa,mCAAXN,IAAI,CAACG,IAAI,IAAE,GAAC,oBAAEH,IAAI,CAACK,UAAU,IAAE,KAAG,oBAAEL,IAAI,CAACM,MAAM","names":["_createBlock","_component_a_select","value","_ctx","allowClear","filterOption","onChange","placeholder","style","_createElementBlock","_Fragment","item","_component_a_select_option","key","name","label","namePinyin","namePy"],"sourceRoot":"","sources":["E:\\Desktop\\projectCode\\12306\\train\\admin\\src\\components\\station-select.vue"],"sourcesContent":["<template>\n  <a-select v-model:value=\"name\" show-search allowClear\n            :filterOption=\"filterNameOption\"\n            @change=\"onChange\" placeholder=\"请选择车站\"\n            :style=\"'width: ' + localWidth\">\n    <a-select-option v-for=\"item in stations\" :key=\"item.name\" :value=\"item.name\" :label=\"item.name + item.namePinyin + item.namePy\">\n      {{item.name}} {{item.namePinyin}} ~ {{item.namePy}}\n    </a-select-option>\n  </a-select>\n</template>\n\n<script>\n\nimport {defineComponent, onMounted, ref, watch} from 'vue';\nimport axios from \"axios\";\nimport {notification} from \"ant-design-vue\";\n\nexport default defineComponent({\n  name: \"station-select-view\",\n  props: [\"modelValue\", \"width\"],\n  emits: ['update:modelValue', 'change'],\n  setup(props, {emit}) {\n    const name = ref();\n    const stations = ref([]);\n    const localWidth = ref(props.width);\n    if (Tool.isEmpty(props.width)) {\n      localWidth.value = \"100%\";\n    }\n\n    // 利用watch，动态获取父组件的值，如果放在onMounted或其它方法里，则只有第一次有效\n    watch(() => props.modelValue, ()=>{\n      console.log(\"props.modelValue\", props.modelValue);\n      name.value = props.modelValue;\n    }, {immediate: true});\n\n    /**\n     * 查询所有的车站，用于车站下拉框\n     */\n    const queryAllStation = () => {\n      axios.get(\"/business/admin/station/query-all\").then((response) => {\n        let data = response.data;\n        if (data.success) {\n          stations.value = data.content;\n        } else {\n          notification.error({description: data.message});\n        }\n      });\n    };\n\n    /**\n     * 车站下拉框筛选\n     */\n    const filterNameOption = (input, option) => {\n      console.log(input, option);\n      return option.label.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n    };\n\n    /**\n     * 将当前组件的值响应给父组件\n     * @param value\n     */\n    const onChange = (value) => {\n      emit('update:modelValue', value);\n      let station = stations.value.filter(item => item.code === value)[0];\n      if (Tool.isEmpty(station)) {\n        station = {};\n      }\n      emit('change', station);\n    };\n\n    onMounted(() => {\n      queryAllStation();\n    });\n\n    return {\n      name,\n      stations,\n      filterNameOption,\n      onChange,\n      localWidth\n    };\n  },\n});\n</script>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}